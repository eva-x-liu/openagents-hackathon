# 📚 BookClub AI Agent - Hackathon Demo

> **OpenAgents 多智能体读书会全案生成系统**  
> 从需求收集到执行物料，3个 Agent 协作完成 2 万字读书会全案策划

---

## 🎯 项目定位

**一句话介绍**：针对知识付费创业者的 AI 读书会策划助手，输入需求，输出完整的"讲书逐字稿 + 招募文案 + 运营 SOP"。

**核心价值**：
- ⏰ **节省时间**：原本需要 7 天的策划工作，现在 10 分钟完成
- 📊 **专业输出**：2 万字详细逐字稿，可直接用于社群讲课
- 🎓 **知识加持**：结合专业书籍 PDF + 食物成分表 + 膳食指南，输出有据可依
- 🔄 **灵活扩展**：支持 3/5/7/21 天任意长度，自动适配销售策略

---

## 🏗️ 技术架构

### 多 Agent 协作流程

```
用户需求 
   ↓
[Intake Agent] 需求收集官
   ↓ 结构化需求单
[Content Agent] 学术内容官
   ↓ 逐字稿（分天生成）
[Ops Agent] 整合输出官
   ↓ 完整执行物料包
用户下载使用
```

### 核心技术栈

| 组件 | 技术 | 说明 |
|------|------|------|
| **Agent 框架** | OpenAgents | 多智能体协作 |
| **LLM** | Gemini 2.0 Flash | 内容生成引擎 |
| **知识库** | PDF + Excel + Markdown | 3层知识架构 |
| **输出格式** | Markdown + Word + 纯文本 | 适配微信生态 |

---

## 🌟 核心创新点

### 1. 三层知识库架构（数据调用优先级）

```
├─ nutrition_reference.md  【营养速查表】
│  └─ 优先级 1：涉及具体克数时检索
│     例："100g 鸡蛋含蛋白质 12.7g"
│
├─ you_are_what_you_eat.pdf 【医学逻辑】
│  └─ 优先级 2：涉及医学原理时检索
│     例："蛋白质是神经递质的原料"
│
└─ dietary_rules.md  【定量标准】
   └─ 优先级 3：涉及推荐量时强制核对
      例："每天鸡蛋不超过1个"
```

**创新点**：不是简单的"把所有资料扔给 AI"，而是**明确每种数据的使用场景**，避免混淆和错误。

---

### 2. 分天生成策略（避免长文截断）

**问题**：一次性生成 9000+ 字逐字稿，AI 容易截断或质量下降。

**解决方案**：

```python
# 第一步：生成主题大纲
Day 1: 营养学的真相
Day 2: 慢病的根源
Day 3: 营养调理方案

# 第二步：逐天生成（每天独立 API 调用）
for day in range(1, total_days + 1):
    day_content = generate_single_day(day)
    save_output(day_content, suffix=f"day{day}")
    
# 第三步：合并完整文档
merge_all_days()
```

**优势**：
- ✅ 避免截断（每天 3500 字，稳定输出）
- ✅ 实时进度（用户看到"Day 1/3 完成"）
- ✅ 支持任意天数（3/5/7/21 天自动适配）
- ✅ 独立文件（方便分段查看和使用）

---

### 3. 渐进式销售策略（自动适配）

| 天数 | 第四部分类型 | 销售力度 |
|------|-------------|---------|
| Day 1 | 🌱 产品种草 | 轻描淡写，激发好奇 |
| Day 2 ~ N-1 | 💬 用户见证 | 真实案例，建立信任 |
| Day N（最后一天） | 🎯 产品差异化 + 完整销讲 | 痛点共情→促单→行动指令 |

**创新点**：不是硬推产品，而是**循序渐进建立信任**，符合真实社群运营节奏。

---

## 📊 Demo 成果展示

### 测试场景

**输入需求**：
```
主理人：注册营养师 Eva
周期：3 天读书会
目标人群：IT 程序员（熬夜、用眼过度）
产品：复合 B 族维生素
```

### 输出成果

| Agent | 输出内容 | 字数 | 文件数 |
|-------|---------|------|--------|
| **Intake** | 结构化需求单 | ~500 字 | 3 个 |
| **Content** | 3 天完整逐字稿 | **~20,000 字** | 12 个 |
| **Ops** | 执行物料包（21条文案+SOP） | **~10,000 字** | 3 个 |
| **总计** | - | **30,000+ 字** | **18 个文件** |

---

## 🎬 现场演示步骤

### Step 1：启动系统（30秒）

```bash
cd bookclub_core
./multi_start.sh
```

**展示点**：
- ✅ 3 个 Agent 自动启动
- ✅ PDF 知识库自动挂载
- ✅ 营养速查表 + 膳食规则加载

---

### Step 2：需求收集（1分钟）

访问 `http://localhost:8700/studio`，在 #general 频道发送：

```
@bc-intake

我是注册营养师Eva，想做一个 3 天的读书会
书籍：《你是你吃出来的》
特长：神经营养学
产品：复合B族维生素
目标人群：IT程序员（熬夜、用眼过度、压力大）
```

**展示点**：
- ✅ Intake Agent 解析需求
- ✅ 输出结构化需求单
- ✅ 提示下一步操作

---

### Step 3：生成逐字稿（3-6分钟）

点击 Intake 输出右上角的 💬 引用按钮，发送：

```
@bc-content

请生成 3 天的完整讲书逐字稿
```

**展示点**（实时进度）：
```
📋 【大纲已生成】
Day 1：熬夜伤身知多少
Day 2：营养自救方案
Day 3：吃出健康，活出精彩

⏳ 正在生成 Day 1/3...
✅ Day 1/3 完成！（约 6800 字）

⏳ 正在生成 Day 2/3...
✅ Day 2/3 完成！（约 7200 字）

⏳ 正在生成 Day 3/3...
✅ Day 3/3 完成！（约 7500 字）

💾 已生成多格式输出...
```

**演示亮点**：
- 📊 打开 `output/content_xxx_day1.md`，展示逐字稿质量
- 🎓 指出引用书中原文（标注 PDF 页码）
- 📈 展示精确营养数据（来自营养速查表）

---

### Step 4：生成运营物料（2-3分钟）

继续引用 Content 输出，发送：

```
@bc-ops

请生成完整的执行物料包
```

**展示点**：
- ✅ Part 3：时间轴与 SOP（招募期 7 天 + 交付期 3 天）
- ✅ Part 4：21 条招募文案（朋友圈 17 条 + 公众号 2 篇 + 短视频 7 条）
- ✅ Part 5：交付期文案（开营 + 每日运营 + 结营）
- ✅ Part 7：销讲资源包（完整销讲脚本 + 异议处理话术）

---

## 🏆 技术亮点总结

### 1. OpenAgents 深度应用

- ✅ 多 Agent 协作（Intake → Content → Ops）
- ✅ 频道消息 + 引用功能（手动流水线）
- ✅ 自定义事件处理（`on_channel_mention`）
- ✅ 知识库集成（PDF + 结构化数据）

### 2. Gemini API 优化

- ✅ PDF 文件上传与复用（避免重复上传）
- ✅ 动态 `max_output_tokens` 设置（content/ops 用 8192）
- ✅ 分批请求策略（避免长文截断）
- ✅ 成本控制（免费层 4 美元可跑多次 Demo）

### 3. 产品化设计

- ✅ 多格式输出（Markdown + Word + 微信纯文本）
- ✅ 自动文件命名（时间戳 + 角色 + 后缀）
- ✅ 实时进度反馈（用户体验友好）
- ✅ 错误处理（缓存清理 + 环境检测）

---

## 📈 未来扩展方向

### 短期（Hackathon 后）
- [ ] Ops Agent 也分天生成（Part 4 的 21 条文案）
- [ ] 支持更多书籍（用户上传 PDF）
- [ ] 支持更多领域（不限于营养学）
- [ ] 添加数据统计（字数、引用次数等）

### 长期（产品化）
- [ ] Web UI（替代 Studio）
- [ ] 用户账号系统
- [ ] 历史记录管理
- [ ] 团队协作功能
- [ ] 支付与订阅

---

## 🎥 Demo 视频脚本

**时长：5 分钟**

| 时间 | 内容 | 关键台词 |
|------|------|---------|
| 0:00-0:30 | 问题背景 | "知识付费创业者每次策划读书会，需要 7 天准备 2 万字逐字稿..." |
| 0:30-1:00 | 解决方案 | "我们用 OpenAgents 构建了 3 个 AI Agent，10 分钟完成全案策划" |
| 1:00-2:00 | 现场演示 Step 1-2 | "输入需求，Intake Agent 自动收集并结构化..." |
| 2:00-4:00 | 现场演示 Step 3-4 | "Content Agent 分天生成，实时显示进度...Ops Agent 输出 21 条文案..." |
| 4:00-4:30 | 成果展示 | "最终输出 30,000+ 字，18 个文件，可直接用于社群运营" |
| 4:30-5:00 | 技术亮点 | "三层知识库架构、分天生成策略、渐进式销售..." |

---

## 💬 Q&A 预案

### Q1：为什么不用 ChatGPT/Claude？
**A**：我们需要**多 Agent 协作**和**知识库集成**。OpenAgents 提供了完整的 Agent 框架，支持 PDF 上传、结构化数据注入，以及 Agent 间的消息传递。单一 LLM 对话做不到这种专业分工。

### Q2：生成的内容质量如何保证？
**A**：三层知识库约束：
1. 营养数据必须来自《中国食物成分表》
2. 医学逻辑必须引用书中原文（标注页码）
3. 推荐量必须符合《中国居民膳食指南 2022》

### Q3：为什么不一次性生成全部内容？
**A**：实测发现，一次性生成 9000+ 字，AI 容易截断或质量下降。**分天生成**后，每天 3500 字，质量稳定，且支持任意天数扩展。

### Q4：成本如何？
**A**：使用 Gemini 2.0 Flash（免费层），4 美元可以跑 10+ 次完整 Demo。如果用户量大，可以切换到 Gemini 1.5 Flash（更便宜）。

---

## 📦 交付物清单

- ✅ **源代码**：`bookclub_core/`（完整可运行）
- ✅ **Demo 文档**：`HACKATHON_DEMO.md`（本文档）
- ✅ **使用指南**：`使用指南.md`（用户手册）
- ✅ **测试输出**：`output/`（真实案例）
- ✅ **启动脚本**：`multi_start.sh` / `stop.sh`

---

## 🎯 Hackathon 评分对应

| 评分维度 | 对应亮点 |
|----------|---------|
| **创新性** | 三层知识库架构、分天生成策略、渐进式销售 |
| **技术难度** | 多 Agent 协作、PDF 知识库集成、分批 API 调用优化 |
| **完成度** | 完整流水线、多格式输出、18 个文件自动生成 |
| **实用性** | 真实场景（知识付费）、可直接使用（2 万字逐字稿） |
| **演示效果** | 实时进度展示、最终成果可视化 |

---

## 🚀 一键启动 Demo

```bash
# 1. 启动系统
cd bookclub_core
./multi_start.sh

# 2. 打开浏览器
open http://localhost:8700/studio

# 3. 按照 Step 1-4 演示即可
```

---

**项目地址**：`/Users/eva/Documents/OpenAgent/bookclub_core/`  
**作者**：Eva（注册营养师 + INTJ 架构师）  
**感谢**：OpenAgents 社区

---

*Demo 文档版本：v1.0 | 更新时间：2026-01-07*
